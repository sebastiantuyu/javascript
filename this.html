<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This: Call, apply, blind</title>
    <style>
        body{font-family: monospace;}
    </style>
</head>
<body>
    
<h1>This: Call, apply, blind</h1>

    <button class="btn-call">Boton 1</button>
<!-- 
<button class="btn-call">Boton 2</button>
<button class="btn-call">Boton 3</button> -->

<!-- <script src="./assets/prototype.js"></script> -->

<script>

    // Obtener botones
    const btns = document.getElementsByClassName("btn-call")
    
    //------> El this de la funcion ahora es el NODELIST
    //------> que pasamos por la variable BTNS
    Array.prototype.forEach.call(btns, button => {
        button.onclick = () => console.log("Nunk pares de aprender")
    })

    // Promesas

    R_M_URL = 'https://rickandmortyapi.com/api/character/'
    var full = "";
    async function getMovies(){
        
        // SI USAMOS EL AWAIT PARA LAS PROMESAS, PODEMOS EMPLEAR EL TRY-CATH

        try {
            const popularMovies = await getSingleMovie(3)
        } catch (error) {
            
        }

    }
    
    function getSingleMovie(n){
            f = makeArray(n)
            
            //const FULL_URL = R_M_URL+f.slice(0,f.length - 1)
            const FULL_URL = 'https://www.swapi.tech/api/person/1'
            return fetch(FULL_URL)
                .then(response => response.json())
                .then(data => data.results)
    }


    function makeArray(n){
        var characters = new Array(n).fill(0)
        characters.map((item,index) => full+=`${index+1},` )
    
        return full
    }


</script>
</body>
</html>